/*! http://wangwl.net */(()=>{var t={924:t=>{"use strict";t.exports='<li class="_comment_item" data-id="${id}">\n    <div class="_comment_item_info">\n        <span class="_comment_item_name">${user_name}</span>\n        <span class="_comment_item_ip">[ ${ip} ]</span>\n        <span class="_comment_item_time">${create_time_str}</span>\n    </div>\n    <div class="_comment_item_content">\n        ${content}\n    </div>\n    ${generateQuote()}\n    <div class="_comment_item_action">\n        <button class="_comment_item_post_btn">回复</button>\n    </div>\n</li>'},175:t=>{"use strict";t.exports='<li class="_comment_quote_item" data-id="${id}">\n    <div class="_comment_quote_index_number">\n        ${index+1}.\n    </div>\n    <div class="_comment_item_info">\n        <span class="_comment_item_name">${user_name}</span>\n        <span class="_comment_item_ip">[ ${ip} ]</span>\n        <span class="_comment_item_operator">回复</span>\n        <span class="_comment_item_parent">${parent && parent.user_name}</span>\n    </div>\n    <div class="_comment_item_content">\n        ${content}\n    </div>\n    <div class="_comment_item_action">\n        <span class="_comment_item_time">${create_time_str}</span>\n        <button class="_comment_item_post_btn">回复</button>\n    </div>\n</li>'},946:t=>{"use strict";t.exports='<div class="_comment_quote">\n    <ul>\n        ${htmlItems}\n        ${\n            !isShowExpandBtn ? \'\' : `\n                <li class="_comment_quote_expand">\n                    <button class="_comment_quote_expand_btn">查看全部${length}条回复</button>\n                </li>\n            `\n        }\n    </ul>\n</div>\n'},866:t=>{"use strict";t.exports='<div class="_comment_post_quote">\n    <div class="_comment_post_quote_close">\n        <span class="_comment_post_quote_close_icon1"></span>\n        <span class="_comment_post_quote_close_icon2"></span>\n    </div>\n    <span class="_comment_post_quote_name">${user_name}</span> :\n    <span class="_comment_post_quote_content">${content}</span>\n</div>'},645:t=>{"use strict";t.exports='<div class="_comment_root" id="_comment_root">\n    <div class="_comment_list_root">\n        <ul>\n\n        </ul>\n    </div>\n    <div class="_comment_post_root">\n        <div id="_comment_post_quote_container">\n\n        </div>\n        <div class="_comment_post_item _comment_post_item_reply">\n            <textarea class="_comment_post_textarea" autocomplete="off" spellcheck="false" id="_comment_input_content"></textarea>\n            <span class="_comment_post_label">写下您的评论</span>\n            <span class="_comment_post_error">评论内容不允许超过300字</span>\n            <span class="_comment_post_tip">必填</span>\n        </div>\n        <div class="_comment_post_item">\n            <input class="_comment_post_input" type="text" id="_comment_input_user" />\n            <span class="_comment_post_label">写下您的昵称</span>\n            <span class="_comment_post_error">昵称不允许超过30字</span>\n            <span class="_comment_post_tip">必填</span>\n        </div>\n        <div class="_comment_post_item">\n            <input class="_comment_post_input" type="text" id="_comment_input_email" />\n            <span class="_comment_post_label">写下您的邮箱</span>\n            <span class="_comment_post_error">邮箱格式不正确</span>\n            <span class="_comment_post_tip">选填，不公开，有新回复时会邮件提醒</span>\n        </div>\n        <div class="_comment_post_item _comment_post_item_action">\n            <button class="_comment_post_btn" id="_comment_submit">发布</button>\n            <span class="_comment_post_error" id="_comment_submit_err">发布消息出错，麻烦稍后再试。</span>\n        </div>\n    </div>\n\n</div>\n'},965:function(t){var e;e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=Function.prototype.call.bind(Object.prototype.toString),o=/(\?([^#]*))?(#.*)?\s*$/,i=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.filter((function(t){return null!=t})).forEach((function(e,n){Object.keys(e).filter((function(t){return null!=e[t]})).forEach((function(n){return t[n]=e[n]}))})),t},a=function(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))},c=Array.isArray||function(t){return"[object Array]"===r(t)},u=function(t,e){if(null==t||"object"!=typeof t)return t||"";var n,r=[],o=encodeURIComponent,i={},a=!1;for(var u in c(e)?e.forEach((function(t){i[t]=!0})):a=e,t)null==(n=t[u])?n="":"object"==typeof n&&(n=JSON.stringify(n)),n=a||i[u]?n:o(n),r.push(o(u)+"="+n);return r.join("&")},s=function(t,e,n){return e=u(e,n),t.replace(o,"?$2&"+e+"$3").replace("?&","?")},f=function(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t},l=0,p={method:"GET",headers:{Accept:"application/json, text/plain, */*"},transformRequest:function(t,e){return t},transformResponse:function(t,e){return t},encodeExclude:!1,responseType:"json"},d={"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},m={"Content-Type":"application/json;charset=utf-8"},h={},v="urlencoded",_="formdata",y="json";e.default=function(t){if("string"!=typeof t.url||""===((e=t.url).trim?e.trim():e.replace(/^\s+|\s+$/g,"")))throw new Error("wwl-ajax : invalid url .");var e,n=i({},p,t),o=n.method.toUpperCase(),c=n.transformRequest,g=n.transformResponse,b=c(n.data,n)||{},w=n.params||{},x="JSONP"===o;("GET"===o||x)&&(i(w,b),b=null);var E,j=i({},h[o]),T=n.contentType;if(E=b,"undefined"!=typeof FormData&&E instanceof FormData)T=_;else if("object"!=typeof b||function(t){return"[object ArrayBuffer]"===r(t)}(b)||function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}(b)||function(t){return"[object Blob]"===r(t)}(b)||function(t){return"[object File]"===r(t)}(b));else if(T===_){var M=new FormData;a(b,(function(t,e){null!=t&&M.append(e,t)})),b=M}else T===y?(b=JSON.stringify(b),i(j,m)):T&&T!==v||(b=u(b,n.encodeExclude),T=v,i(j,d));var S=i(j,n.headers);n.method=o,n.params=w,n.data=b,n.headers=S;var C=x?function(t){var e=t||{},n=e.url,r=void 0===n?"":n,o=e.params,i=void 0===o?{}:o,a=e.cbParam,c=e.cbName,u=e.timeout,p=e.charset,d=void 0===p?"utf-8":p,m=(e.responseType,!1);!u&&(u=3e4),!a&&(a="callback"),!c&&(c="__jsonp__"+l++),i[a]=c,r=s(r,i,t.encodeExclude);var h,v=document.body||document.head,_=document.createElement("script"),y=f();function g(t,e,n){window[c]=_.onload=_.onerror=null,h&&clearTimeout(h);try{v.removeChild(_)}catch(t){}m||(200===t?y.resolve:y.reject)({status:t,statusText:e,data:n})}return h=setTimeout((function(){h=void 0,g(400,"timeout")}),u),window[c]=function(t){g(200,"ok",t)},_.onload=function(){},_.onerror=function(){g(404,"error")},_.charset=d,_.src=r,v.appendChild(_),y.abort=function(){m=!0},y}(n):function(t){var e=f(),n=new XMLHttpRequest,r=t.url,o=t.method,i=t.params,c=t.data,u=t.responseType;return n.open(o,s(r,i,t.encodeExclude),!0),n.timeout=t.timeout||0,n.onreadystatechange=function(){if(n&&4===n.readyState){var t,r=n.responseType&&"text"!==n.responseType?n.response:n.responseText;if("json"===u&&(!(t=r)||"object"!=typeof t))try{r=JSON.parse(r)}catch(t){}var o=n.status,i={data:r,status:1223===o?204:n.status,statusText:1223===o?"No Content":n.statusText,xhr:n};o>=200&&o<300?e.resolve(i):e.reject(i),n=null}},n.ontimeout=function(){e.reject(function(t,e){return{message:"timeout",status:e.status,statusText:e.statusText,data:e.responseText,xhr:e}}(0,n)),n=null},n.setRequestHeader&&a(t.headers,(function(t,e){null!=t&&n.setRequestHeader(e,t)})),n.withCredentials=t.withCredentials,n.responseType=u||"",n.send(c||null),e.abort=function(){n&&n.abort()},e}(n),k=C.promise.then((function(t){return t.data=g(t.data,n),t}),(function(t){return t.data=g(t.data,n),Promise.reject(t)}));return k.abort=C.abort,k}}]).default},t.exports=e()},592:t=>{
/*! http://wangwl.net */
self,t.exports=(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>q,Dom:()=>y});var n=Function.prototype.call,r=n.bind(Array.prototype.slice),o=document.documentElement,i=window,a=function(t){return"function"==typeof t},c=function(t){var e=[];return t.forEach((function(t){e.includes(t)||e.push(t)})),e},u=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},s=function(t){var e=t.path||t.composedPath&&t.composedPath();return e&&0!==e.length||((e=new y(t.target).parents().nodes).unshift(t.target),e.push(window)),e},f=0,l=n.bind(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),p=n.bind(Element.prototype.closest||function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(l(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),d=function(t){if(function(t){return t.nodeType}(t))return t;if("string"==typeof t)return A.fragment(t);if((r=t)&&"object"==typeof r&&isFinite(r.length)&&r.length>=0&&r.length===Math.floor(r.length)&&r.length<4294967296&&!r.nodeType){for(var e=document.createDocumentFragment(),n=0;n<t.length;n++)e.appendChild(t[n]);return e}var r},m=/[A-Z]/g,h=function(t){return t.replace(m,(function(t,e){return(0===e?"":"-")+t.toLowerCase()}))};function v(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}var _=document.createElement("div"),y=function(){function t(t){var e,n=this;this.dataset=_.dataset?function(t,e){if(e)return this.each((function(n){return n.dataset[t]=e}));if("string"==typeof t)return this.map((function(e){return e.dataset[t]})).join("");if("object"==typeof t)for(var n in t)this.each((function(e){return e.dataset[n]=t[n]}));return this}:function(t,e){var n;if("string"==typeof t)n="data-"+h(t);else if("object"==typeof t)for(var r in n={},t)n["data-"+h(r)]=t[r];return this.attr(n,e)},null==t?e=[]:t===window?e=[window]:t.nodeType?e=[t]:(Array.isArray(t)||(t=Array.from(t)),e=t.filter((function(t){return t===window||t&&t.nodeType}))),this.nodes=e,e.forEach((function(t,e){return n[e]=t})),this.length=e.length,O.forEach((function(t){"constructor"!==t&&(n[t]=n[t].bind(n))}))}return t.prototype.each=function(t){return this.nodes.forEach(t),this},t.prototype.map=function(t){return this.nodes.map(t)},t.prototype.filter=function(t){return this.nodes.filter(t)},t.prototype.eq=function(e){return new t(this.nodes[e])},t.prototype.first=function(){return this.eq(0)},t.prototype.last=function(){return this.eq(this.length-1)},t.prototype.classNames=function(t){return void 0===t&&(t=0),r(this.nodes[t].classList)},t.prototype.addClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===(t=t.map((function(t){return t.trim()})).filter((function(t){return t}))).length?this:this.each((function(e,n){var r;(r=e.classList).add.apply(r,t)}))},t.prototype.removeClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===(t=t.map((function(t){return t.trim()})).filter((function(t){return t}))).length?this:this.each((function(e,n){var r;(r=e.classList).remove.apply(r,t)}))},t.prototype.toggleClass=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===(e=e.map((function(t){return t.trim()})).filter((function(t){return t}))).length?this:this.nodes[0].classList.toggle?this.each((function(t,n){e.forEach((function(e){t.classList.toggle(e)}))})):this.each((function(n,a){r=t.classNames(a),o=[],i=[],e.forEach((function(t){r.includes(t)?o.push(t):i.push(t)})),o.length&&t.removeClass.apply(t,o),i.length&&t.addClass.apply(t,i)}));var r,o,i},t.prototype.hasClass=function(t){return this.nodes.some((function(e){return e.classList.contains(t)}))},t.prototype.parent=function(){return new t(this.map((function(t){return t.parentNode})))},t.prototype.parents=function(e){void 0===e&&(e=0);for(var n=this.nodes[e].parentNode,r=[];n;)r.push(n),n=n.parentNode;return new t(r)},t.prototype.children=function(){return new t(c(u(this.map((function(t){return r(t.children)})))))},t.prototype.next=function(){return new t(this.map((function(t){return v(t,"nextSibling")})))},t.prototype.prev=function(){return new t(this.map((function(t){return v(t,"previousSibling")})))},t.prototype.find=function(e){return new t(c(u(this.map((function(t){return r(t.querySelectorAll(e))})))))},t.prototype.closest=function(e){return new t(this.nodes.map((function(t){return p(t,e)})))},t.prototype.includes=function(t){return this.nodes.includes(t)},t.prototype.match=function(t){return this.nodes.some((function(e){return l(e,t)}))},t.prototype.val=function(t){return void 0===t?this.map((function(t){return t.value||""})).join(""):this.each((function(e){return e.value=t}))},t.prototype.attr=function(t,e){if(e)return this.each((function(n){return n.setAttribute(t,e)}));if("string"==typeof t)return this.map((function(e){return e.getAttribute(t)})).join(" ");if("object"==typeof t){for(var n in t)this.each((function(e){return e.setAttribute(n,t[n])}));return this}},t.prototype.removeAttr=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){t.each((function(t){return t.removeAttribute(e)}))})),this},t.prototype.html=function(t){return void 0===t?this.map((function(t){return t.innerHTML})).join(""):this.each((function(e){return e.innerHTML=t}))},t.prototype.outerHtml=function(t){return void 0===t?this.map((function(t){return t.outerHTML})).join(""):this.each((function(e){return e.outerHTML=t}))},t.prototype.text=function(t){return void 0===t?this.map((function(t){return t.innerText})).join(""):this.each((function(e){return e.innerText=t}))},t.prototype.append=function(t){var e=d(t);if(!e)return this;var n=this.length-1;return this.each((function(t,r){t.appendChild(r===n?e:e.cloneNode(!0))}))},t.prototype.prepend=function(t){var e=d(t);if(!e)return this;var n=this.length-1;return this.each((function(t,r){t.insertBefore(r===n?e:e.cloneNode(!0),t.firstChild)}))},t.prototype.insertBefore=function(t){var e=d(t);if(!e)return this;var n=this.length-1;return this.each((function(t,r){t.parentNode.insertBefore(r===n?e:e.cloneNode(!0),t)}))},t.prototype.insertAfter=function(t){var e=d(t);if(!e)return this;var n=this.length-1;return this.each((function(t,r){var o=t.nextElementSibling,i=t.parentNode,a=r===n?e:e.cloneNode(!0);o?i.insertBefore(a,o):i.appendChild(a)}))},t.prototype.replace=function(t){var e=d(t);if(!e)return this;var n=this.length-1;return this.each((function(t,r){t.parentNode.replaceChild(r===n?e:e.cloneNode(!0),t)}))},t.prototype.remove=function(){return this.each((function(t){t.parentNode&&t.parentNode.removeChild(t)}))},t.prototype.style=function(t,e){var n={};if("string"==typeof t){if(void 0===e)return this[0].style[t];n[t]=e}else{if("object"!=typeof t)return this;n=t}for(var r in n)this.each((function(t){t.style[r]=n[r]}));return this},t.prototype.removeStyle=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this.removeAttr("style"):this.each((function(e){t.forEach((function(t){e.style.removeProperty(t)}))}))},t.prototype.computeStyle=function(t){return window.getComputedStyle(this.nodes[0],t)},t.prototype.isHidden=function(){var t=this;return this.nodes.every((function(e,n){var r=t.eq(n).computeStyle();return"none"===r.display||"hidden"===r.visibility}))},t.prototype.isVisible=function(){return!this.isHidden()},t.prototype.maxScroll=function(t){void 0===t&&(t=0);var e=this[t];return e.scrollHeight-e.clientHeight},t.prototype.hide=function(){var t=this;return this.each((function(e,n){var r=t.eq(n),o=r.computeStyle().display;"none"!==o&&(r.dataset("_pre_display",o),r.style("display","none"))}))},t.prototype.show=function(t){var e=this;return this.each((function(n,r){var o=e.eq(r),i=o.computeStyle().display;if("none"===i)if(t)o.style("display",t);else{var a=o.dataset("_pre_display");if(a)o.style("display",a);else{if("none"===o.style("display")&&o.removeStyle("display"),"none"!==(i=o.computeStyle().display))return;o.style("display","block")}}}))},t.prototype.toggle=function(t){var e=this;return this.each((function(n,r){var o=e.eq(r);"none"===o.computeStyle().display?o.show(t):o.hide()}))},t.prototype.clone=function(e){return new t(this.map((function(t){return t.cloneNode(e)})))},t.prototype.offset=function(t){void 0===t&&(t=0);var e=this[t].getBoundingClientRect();return{left:e.left+(i.pageXOffset||o.scrollLeft||document.body.scrollLeft)-o.clientLeft,top:e.top+(i.pageYOffset||o.scrollTop||document.body.scrollTop)-o.clientTop}},t.prototype.offsetRoot=function(t,e){if(void 0===e&&(e=0),!t||!t.nodeType)return this.offset(e);var n=this[e];if(t.contains(n)){var r=n.getBoundingClientRect(),o=t.getBoundingClientRect();return{left:r.left-o.left-t.clientLeft+t.scrollLeft,top:r.top-o.top-t.clientTop+t.scrollTop}}},t.prototype.trigger=function(t,e){return this.each((function(n){k(n,t,e)}))},t.prototype.on=function(t,e){return this.each((function(n,r){n.addEventListener(t,e),x(n,t,e)}))},t.prototype.off=function(t,e){return this.each((function(n,r){var o=w(n),i={};for(var a in t?i[t]=e?[e]:o[t]:i=o,i)i[a].forEach((function(t){return n.removeEventListener(a,t)}));E(n,t,e)}))},t.prototype.onDelegate=function(t,e,n){return this.each((function(o){var i,a=w(o),c=a[t]&&a[t].find((function(t){return t.isDelegate}));if(c){var u=c.cache;u[e]?u[e].push(n):u[e]=[n]}else{var f=function(t){var e=s(t),n=[],i=f.cache;for(var a in i)n.push({queryNodes:r(o.querySelectorAll(a)),fns:i[a]});var c=e.length;n.forEach((function(n){for(var r=n.queryNodes,o=n.fns,i=function(){var n=e[a];if(r.includes(n))return o.forEach((function(e){e.call(n,t)})),"break"},a=0;a<c&&"break"!==i();a++);}))};f.cache=((i={})[e]=[n],i),f.isDelegate=!0,o.addEventListener(t,f),x(o,t,f)}}))},t.prototype.offDelegate=function(t,e,n){return this.each((function(r){var o,i=w(r);if(i){var a;if(t){if(!i[t])return;(o={})[t]=i[t].filter((function(t){return t.isDelegate})),a=o}else a=function(t,e){var n={};for(var r in t)n[r]=e(t[r],r);return n}(i,(function(t){return t.filter((function(t){return t.isDelegate}))}));if(e)a[t].forEach((function(o){var i=o.cache;if(i[e])if(n){var a=i[e].indexOf(n);i[e].splice(a,1)}else i[e]=void 0;0===Object.keys(i).filter((function(t){return i[t]&&i[t].length>0})).length&&(r.removeEventListener(t,o),E(r,t,o))}));else for(var c in a)a[c].forEach((function(t){r.removeEventListener(c,t),E(r,c,t)}))}}))},t}(),g={},b=function(t){var e,n=t._expando_e$id;return n||(n=t._expando_e$id=(void 0===(e="node")&&(e=""),e+f++)),n},w=function(t){var e=b(t),n=g[e];return n||(n=g[e]={}),n},x=function(t,e,n){var r=w(t);r[e]?r[e].push(n):r[e]=[n]},E=function(t,e,n){var r=b(t),o=g[r];o&&(e||(g[r]=void 0),o[e]&&(n?(o[e]=o[e].filter((function(t){return t!==n})),0===o[e].length&&(o[e]=void 0)):o[e]=void 0))},j=function(t,e){if(a(Event))return new Event(t,e);var n=document.createEvent("MouseEvents");return n.initEvent(t,!0,!0),e&&Object.assign(n,e),n},T=function(t,e,n){return a(t)?new t(e,n):j(e,n)},M=T.bind(void 0,MouseEvent),S=[[/^key.*/,T.bind(void 0,KeyboardEvent)],[/^(.*click|mouse.*|drop)/,M],[/^(focus.*|blur)/,T.bind(void 0,FocusEvent)],[/^wheel/,T.bind(void 0,WheelEvent)]],C={focus:{check:function(t){return t.focus},trigger:function(t){t.focus()}},blur:{check:function(t){return t.blur},trigger:function(t){t.blur()}},click:{check:function(t){return t.click},trigger:function(t){t.click()}}},k=function(t,e,n){if(e=e.trim(),C[e]&&C[e].check(t))C[e].trigger(t);else{var r=function(t,e){var n=S.find((function(e){return e[0].test(t)}));return n?n[1](t,e):j(t,e)}(e,n);t.dispatchEvent(r)}};function A(t){return new y("string"==typeof t?document.querySelectorAll(t):t)}["offset","client","scroll"].forEach((function(t){["Height","Width","Top","Left"].forEach((function(e){var n=t+e;y.prototype[n]=function(t){return void 0===t&&(t=0),this[t][n]}}))})),A.fragment=function(t){_.innerHTML=t;for(var e,n=document.createDocumentFragment();e=_.firstChild;)n.appendChild(e);return n};var D=/</;A.create=function(t){return D.test(t)?(_.innerHTML=t,new y(_.children)):new y(document.createElement(t))};var O=Object.getOwnPropertyNames(y.prototype);const q=A;return e})()},890:function(t){t.exports=(()=>{"use strict";var t={};return(()=>{var e=t,n="undefined"!=typeof window&&window.document,r=n?navigator.userAgent:"",o=n?navigator.platform:"",i=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/i,a=/(\?([^#]*))?(#.*)?\s*$/,c=/[\u0020-\u007f\uff61-\uff9f]/g,u=/\n/g,s=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]/g,f=/&#(\d+);|(<br\s*\/\s*>)/g,l=/&.+?;/g,p=/-([a-zA-Z])/g,d=/[A-Z]/g,m=/(?:[?&])(.*?)(?:=(.*?))?(?=&|$|#)/g,h=/y+|M+|d+|H+|h+|m+|s+|S+|a|(\[.*?])/g,v=/(?:^|&)(.*?)=(.*?)(?=&|$)/g,_=/\$\{\s*(.+?)\s*\}/g,y=/Chrome\/(\d+)/,g=/Firefox\/(\d+)/,b=/Version\/([\d.]+)( Mobile\/.+?)? Safari\/\d+/,w=/MSIE (\d+)/,x=/Trident\/.*; rv:(\d+)/,E=/(Edge\/\d+)/,j=/Android/i,T=/MicroMessenger/,M=/iphone|ipad|ipod|ios/i;function S(t,e){var n=t.exec(e||r);return n&&n[1]}var C=Function.prototype.call,k=(C.bind(Array.prototype.slice),C.bind(Object.prototype.toString)),A=Array.isArray||function(t){return"[object Array]"===k(t)},D=function(t){return"[object Function]"===k(t)},O=function(t){return"boolean"==typeof t},q=function(t){return"number"==typeof t},P=Object.assign||function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach((function(e){for(var n in e)t[n]=e[n]})),t},I=function(t,e){if(t.fill)return t.fill(e);for(var n=t.length-1;n>-1;n--)t[n]=e;return t},$=function(t,e,n){return function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return!e&&(e=this),t.apply(e,r)}},L=function(t){var e={},n=!1;return A(t)?t.forEach((function(t){return e[t]=!0})):n=t,{map:e,isAll:n}},F=function(t){var e=function(){var t="inner_copy_fake_ele",e=document.getElementById(t);return e||((e=document.createElement("textarea")).style.position="absolute",e.style.left="-999px",e.style.top="0px",e.setAttribute("readonly",""),e.id=t,document.body.appendChild(e),e)}();return e.value=t,e.select(),document.execCommand("copy")};function N(t,e){try{return decodeURIComponent(t)}catch(t){throw t.message="URI malformed (malformed key: "+e+")",t}}var H=0,B={},R={guid:function(t){return void 0===t&&(t=""),t+H++},noop:function(){},isAndroid:function(t){return j.test(t||r)},isIos:function(t){return M.test(t||r)},isWeiXin:function(t){return T.test(t||r)},isWifi:function(){var t=navigator,e=t.connection||t.mozConnection||t.webkitConnection;return e?"cellular"!==e.type:R.isWeiXin()?/NetType\/WIFI/.test(navigator.userAgent):void 0},isWindows:function(){return"Win32"===o||"Windows"===o||"Win16"===o||"Win64"===o||"WinCE"===o},isMac:function(){return"MacIntel"===o||"Macintosh"===o||"MacPPC"===o||"Mac68K"===o},isUrl:function(t){return i.test(t)},isArrayLike:function(t){return t&&"object"==typeof t&&isFinite(t.length)&&t.length>=0&&t.length===Math.floor(t.length)&&t.length<4294967296&&!t.nodeType},isIE:function(t){return S(w,t)||S(x,t)||S(E,t)},isChrome:function(t){return S(y,t)},isFirefox:function(t){return S(g,t)},isSafari:function(t){return S(y,t)||S(E,t)?null:S(b,t)},defer:function(){var t={};return t.promise=new Promise((function(e,n){t.resolve=function(n){return e(n),t.promise},t.reject=function(e){return n(e),t.promise}})),t},each:function(t,e,n){var r=t;if(A(r))return r.forEach(e,n);Object.keys(r).forEach((function(t){e.call(n,r[t],t,r)}))},map:function(t,e,n){var r=t;if(A(r))return r.map(e,n);var o=[];return R.each(r,(function(t,i){o.push(e.call(n,t,i,r))})),o},find:function(t,e,n){var r=t;if(A(r))return r.find(e,n);var o=Object.keys(r).find((function(t){return e.call(n,r[t],t,r)}));return o&&r[o]},unique:function(t,e,n,r){if(void 0===e&&(e=!1),"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof Set&&!n)return Array.from(new Set(t));var o=[],i=n?t.map(n,r):t;if(e){var a;i.forEach((function(e,n){a!==e&&(a=e,o.push(t[n]))}))}else{var c=[];i.forEach((function(e,n){c.includes(e)||(c.push(e),o.push(t[n]))}))}return o},cache:$,loop:function(t,e,n){void 0===n&&(n=!1);var r=R.guid("loop"),o=function(){B[r]=setTimeout(i,e)},i=function(){Promise.resolve(t()).then(o)};return n?i():o(),r},clearLoop:function(t){var e=B[t];e&&(clearTimeout(e),B[t]=void 0)},timeout:function(t,e){void 0===t&&(t=0);var n=R.defer(),r=setTimeout((function(){n.resolve(e?e():void 0)}),t),o=n.promise;return o.abort=function(){clearTimeout(r)},o},throttle:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0],o=e[1],i=e[2],a=e[3];D(r)||(a=i,i=o,o=r,r=void 0),O(o)||(a=i,i=o,o=!1),null==i&&(i=300);var c,u,s,f=a;return s=o?function(){t.apply(a,u),c=setTimeout((function(){c=void 0}),i)}:function(){c=setTimeout((function(){t.apply(a,u),c=void 0}),i)},function(){u=arguments,!f&&(a=this),r&&r.apply(a,u),c||s()}},debounce:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0],o=e[1],i=e[2],a=e[3];D(r)||(a=i,i=o,o=r,r=void 0),O(o)||(a=i,i=o,o=!1),null==i&&(i=300);var c,u,s,f=a,l=function(t){clearTimeout(c),c=setTimeout(t,i)};return s=o?function(){c||t.apply(a,u),l((function(){c=void 0}))}:function(){l((function(){t.apply(a,u),c=void 0}))},function(){u=arguments,!f&&(a=this),s(),r&&r.apply(a,u)}},download:function(t,e){var n=document.createElement("a");n.download=e,n.href=t,n.target="_blank";var r=document.createEvent("MouseEvents");r.initEvent("click",!1,!1),n.dispatchEvent(r)},param:function(t,e){if(void 0===e&&(e=!1),null==t||"object"!=typeof t)return t?t+"":"";var n,r=[],o=encodeURIComponent,i=L(e),a=i.map,c=i.isAll;for(var u in t)null==(n=t[u])?n="":"object"==typeof n&&(n=JSON.stringify(n)),n=c||a[u]?n:o(n),r.push(o(u)+"="+n);return r.join("&")},parseParam:function(t,e){void 0===e&&(e=!1);var n,r,o={},i=N,a=L(e),c=a.map,u=a.isAll;for(v.lastIndex=0;n=v.exec(t);)o[r=n[1]]=u||c[r]?n[2]:i(n[2],r);return o},resolveUrl:function(t,e,n){e=P(R.getQuery(t),e);var r=R.param(e,n);return t.replace(a,"?"+r+"$3")},getQuery:function(t,e){void 0===e&&(e=!1);var r,o,i,a={},c=L(e),u=N;for(m.lastIndex=0;r=m.exec(t||n&&location.search||"");)o=r[1],i=r[2],o&&(i||(i=""),a[u(o,o)]=c.isAll||c.map[o]?i:u(i,o));return a},countStr:function(t,e,n,r){if(void 0===e&&(e=1),void 0===n&&(n=.5),void 0===r&&(r=1),!t)return 0;e=+e,n=+n,r=+r;var o=(t+="").match(c),i=t.match(u),a=o?o.length:0,s=i?i.length:0;return e*(t.length-a-s)+n*a+r*s},copyTxt:function(t){try{if(!F(t))return!1}catch(t){return!1}return!0},htmlEncode:function(t){var e;return"string"!=typeof t&&(t+=""),t.replace(s,(function(t){return 32===(e=t.charCodeAt(0))&&(e=160),10===e?"<br/>":"&#"+e+";"}))},htmlDecode:function(t){if(null==t||""===t)return"";var e=t.match(l);if(e){var n=document.createElement("div");n.innerHTML=e.join(","),e=n.innerText.split(","),n=null}else e=[];var r=0;return t.replace(l,(function(t,n){return e[r++]}))},camelCase:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.join("-").replace(p,(function(t,e){return e.toUpperCase()}))},kebabCase:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return t.replace(d,(function(t,e){return(0===e?"":"-")+t.toLowerCase()}))})).join("-")},paddingLeft:function(t,e,n){var r,o;return void 0===t&&(t=""),(e=~~e)<=(o=(t+="").length)?t:(n=n&&n.charAt(0)||" ",(r=I(new Array(e-o),n)).push(t),r.join(""))},template:function(){var t=!0;try{new Function("``")}catch(e){t=!1}return t?function(t,e){return new Function("__scope__","\n                    var __result__;\n                    try{\n                        with(__scope__){\n                            __result__=`"+t+'`\n                        }\n                    }\n                    catch(e){\n                        __result__="";\n                    }\n                    return __result__;\n                    ')(e)}:function(t,e){var n=!0,r=t.split(_).map((function(t){return(n=!n)?t:"'"+t.replace("'","\\'")+"'"})).join("+");return new Function("__scope__","\n            var __result__;\n            with(__scope__){ \n                __result__="+r+";\n            }\n            return __result__;\n         ")(e)}}(),pick:function(t,e){if(!t)return{};var n=[];if(D(e))n=Object.keys(t).filter(e);else{if(!Array.isArray(e))return{};n=e}return n.reduce((function(e,n){return n in t&&(e[n]=t[n]),e}),{})},retry:function(t,e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=this),"number"!=typeof e)throw new TypeError("the parameter max is not a number");var o=0,i=function(){return o++,Promise.resolve(t.apply(r,arguments)).then((function(t){return o=0,t}),(function(t){var r=this;return o<e?n>0?R.timeout(n,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(r,t)})):i.apply(this,arguments):(o=0,Promise.reject(t))}))};return i}},W="__p$symbol__",U=function(t,e){if(!D(t))throw TypeError("promisify(): argument not a function");return Object.defineProperties((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.__p$symbol__;if(o){if(!D(o))throw TypeError(t.name+"[promisify.custom] is not a function");return Promise.resolve(o.apply(e||this,n))}var i=R.defer(),a=t.length-1-n.length;a>0&&(n=n.concat(I(new Array(a),void 0)));try{n.push((function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t?i.reject(t):e.length>1?i.resolve(e):i.resolve(e[0])})),t.apply(e||this,n)}catch(t){i.reject(t)}return i.promise}),Object.getOwnPropertyDescriptors(t))};U.custom=W;var J={year:"FullYear",month:"Month",day:"Date",hour:"Hours",min:"Minutes",sec:"Seconds"},V={dateFormat:function(t,e){if(void 0===e&&(e="yyyy-MM-dd hh:mm:ss"),"[object Date]"!==k(t))return"";var n,r,o=t.getHours(),i=o>12?"pm":"am",a={y:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:o,h:o>12?o-12:o,m:t.getMinutes(),s:t.getSeconds(),S:t.getMilliseconds(),a:i};return e.replace(h,(function(t){return"["===(r=t.charAt(0))?t.slice(1,-1):"a"===r?a[r]:(n=R.paddingLeft(a[r],t.length,"0"),"y"===r&&(n=n.slice(-t.length,n.length)),n)}))},dateParse:function(t,e){e||(e="yyyy-MM-dd hh:mm:ss");var n,r,o={y:void 0,M:void 0,d:1,H:void 0,h:void 0,m:0,s:0,S:0,a:"am"},i=e.replace(h,(function(t){var e,n=t[0],r=t.length;if("y"===n)e=r<4?"\\d{"+r+"}":"\\d{4}";else if("M"===n||"d"===n||"H"===n||"h"===n||"m"===n||"s"===n)e=1===r?"[1-9]\\d|\\d":"\\d{2}";else if("S"===n)e=r<3?"\\d{"+r+"}":"\\d{3}";else if("a"===n)e="(am|Am|AM|pm|Pm|PM)?";else if("["===n)return t.slice(1,-1);return"("+e+")"})),a=new RegExp(i,"g").exec(t),c=1;if(!a)throw new Error('The date format "'+e+'" match the date string "'+t+'" failed.');for(;n=h.exec(e);)"["!==(r=n[0].charAt(0))&&(o[r]="a"===r?a[c++]:~~a[c++]);var u,s=(new Date).getFullYear();return void 0===o.y?o.y=s:(u=o.y+"").length<4&&(u=(s+"").slice(0,4-u.length)+u,o.y=~~u),void 0===o.M?o.M=0:o.M-=1,o.h||(o.a="am",o.h=o.H||0),o.a=o.a.toLowerCase(),"pm"===o.a&&(o.h+=12),new Date(o.y,o.M,o.d,o.h,o.m,o.s,o.S)},dateAdd:function(t,e){var n=J;"number"==typeof e&&(e={day:e}),t=new Date(t);var r="";return R.each(n,(function(o,i){e[i]&&t["set"+(r=n[i])](t["get"+r]()+~~e[i])})),t},firstDateInMonth:function(t){return(t=new Date(t)).setDate(1),t},lastDateInMonth:function(t){return(t=new Date(t)).setMonth(t.getMonth()+1),t.setDate(0),t},firstWeekInMonth:function(t){var e=V.firstDateInMonth(t),n=e.getDay();return 0===n&&(n=7),V.dateAdd(e,1-n)},lastWeekInMonth:function(t){var e=V.lastDateInMonth(t),n=e.getDay();return 0!==n&&(e=V.dateAdd(e,7-n)),e},weekRange:function(t,e,n){var r,o=[];if(!t||!e)return o;t>e&&(r=e,e=t,t=r),"number"!=typeof n&&(n=1);for(var i,a=1,c=new Date(t);c<e;)1===a&&c.getDay()===n?(+c!=+t&&o.push({end:new Date(c.getTime()-864e5)}),o.push({start:new Date(c)}),a=7):7===a&&(o[i=o.length-1].end=new Date(c.getTime()-864e5),o[i].duration=7,o.push({start:new Date(c)})),c.setDate(c.getDate()+a);for(var u=[0,1,2,3,4,5,6],s=0;s<n;s++)u[s]+=7;var f=o.length;return 0===f?o=[{start:t,end:e,duration:u[e.getDay()]-u[t.getDay()]+1}]:(o[0].start||(o[0].start=t,o[0].duration=u[o[0].end.getDay()]-u[t.getDay()]+1),o[i=f-1].end=e,o[i].duration=u[o[i].end.getDay()]-u[o[i].start.getDay()]+1),o},weekendsCount:function(t,e){t=new Date(t.getFullYear(),t.getMonth(),t.getDate());var n,r,o,i,a=((e=new Date(e.getFullYear(),e.getMonth(),e.getDate()))-t)/864e5+1;return n=2*Math.floor(a/7),(r=a%7)&&(i=(o=t.getDay())+r-1,0===o?n++:o<=6&&i>=6&&(n+=Math.min(i-Math.max(o,6)+1,2))),n}},Y=$((function(){for(var t,e,n={},r=/(?:;\s|^)([^;]*?)=([^;]*)/g,o=/([^&]+)=([^&]+)(?:&|$)/g,i=document.cookie;t=r.exec(i);)for(n[t[1]]={value:unescape(t[2]),values:null};e=o.exec(t[2]);)n[t[1]].values=n[t[1]].values||{},n[t[1]].values[e[1]]=unescape(e[2]);return n})),z=function(t,e,n){var r,o,i,a,c="";if(t){if(t+="",null==e&&(e=""),"object"==typeof e){for(o in e)c+=o+"="+escape(e[o])+"&";c=c.slice(0,-1)}else c+=escape(e);return(n=n||{}).expires&&"[object Date]"!==k(n.expires)&&(a=n.expires,(i=new Date).setTime(i.valueOf()+(q(a.day)?86400*a.day*1e3:0)+(q(a.hour)?3600*a.hour*1e3:0)+(q(a.min)?60*a.min*1e3:0)+(q(a.sec)?1e3*a.sec:0)),n.expires=i),r=t+"="+c+(n.expires?";expires="+n.expires.toUTCString():"")+(n.path?"; path="+n.path:"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":""),document.cookie=r,Y(!0)[t]}},Z=function(t,e){return z(t,"",P(e,{expires:{day:-30}})),!(t in Y(!0))},Q=P(R,{promisify:U,getCookie:Y,setCookie:z,deleteCookie:Z,cookie:{delete:Z,del:Z,set:z,get:function(t,e){var n=Y(e)[t];return n&&n.value}}},V,{uniq:R.unique});n||(["isWifi","download","copyTxt","getCookie","setCookie","deleteCookie"].forEach((function(t){R[t]=R.noop})),R.htmlDecode=function(t){return(t+="").replace(f,(function(t,e,n){return n?"\n":("160"===e&&(e=32),String.fromCharCode(e))}))}),e.default=Q})(),t.default})()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t,e=n(592),r=n.n(e),o=n(890),i=n.n(o),a=n(965),c=n.n(a),u=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),s=JSON;function f(t){return t.content=i().htmlEncode(t.content),t.user_name=i().htmlEncode(t.user_name),t}var l,p=function(t){function e(e){var n=t.call(this,e.data.message)||this;return n.code=e.data.code,n}return u(e,t),e}(Error);const d={submit:function(t,e,n,r){var o=function(t){var e={};return i().each(t,(function(t,n){e[n]="string"==typeof t?t||void 0:t})),e}({content:t,user_name:e,email:n,pid:r,topic_id:l}),a=~~(255*Math.random()),u=function(t,e){for(var n="",r=0,o=s.stringify(t);r<o.length;r++){var i=o[r].codePointAt(0)+e;n+=String.fromCodePoint(i)}return n}(o,a);return c()({url:"/comment/gen/"+a,method:"POST",contentType:"formdata",data:{data:u}}).then((function(t){if(1!==t.data.code)throw new p(t);return f(t.data.data)}))},list:function(){return c()({url:"/comment/list",method:"POST",data:{topic_id:l},contentType:"formdata"}).then((function(t){return t.data.data.map(f)}))}};var m,h=n(924),v=n(175),_=n(946),y={};function g(t){return(m=t.find("._comment_list_root ul")).onDelegate("click","._comment_quote_expand_btn",(function(){j(r()(this).closest("[data-id]").dataset("id"))})),d.list().then((function(t){var e=function(t){var e=function(t,e){return t.create_time-e.create_time};t.sort(e);for(var n=[],r=[],o=0,i=t;o<i.length;o++){var a=i[o];b(a),(a.top_pid?r:n).push(a)}return r.forEach((function(t){y[t.top_pid].children.push(t)})),n}(t).map(w).join(""),n=r().fragment(e);m.append(n)}),(function(t){}))}function b(t){t.create_time_str=i().dateFormat(new Date(1e3*t.create_time),"yyyy-MM-dd HH:mm"),t.children=[],t.expand_second=!1,t.parent=t.pid?y[t.pid]:null,y[t.id]=t}function w(t){return i().template(h,Object.assign(t,{generateQuote:E.bind(null,t)}))}var x="_js_comment_quote_holder";function E(t){var e=t.children;if(!e||0===e.length)return'<div class="'.concat(x,'"></div>');var n=!t.expand_second&&e.length>2,r=(n?e.slice(0,2):e).map((function(t,e){return i().template(v,Object.assign(t,{index:e}))})).join("");return i().template(_,{isShowExpandBtn:n,htmlItems:r,length:e.length})}function j(t){var e=y[t];e.expand_second=!0;var n=E(e),r=m.find('._comment_item[data-id="'.concat(t,'"]')),o=r.find("._comment_quote");o[0]||(o=r.find("."+x)),o.outerHtml(n)}var T,M,S,C,k,A=n(866);window.jquery=r();var D="_wwl_comment_user",O="_wwl_comment_email";var q="_comment_post_mini_label",P="_comment_post_item_error";function I(t){var e=t.parent();t.val()?e.addClass(q):e.removeClass(q)}var $,L=/[\w'.%+-]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,4}/,F={email:[{checker:function(t){return t.length>50?"不允许超过50字符，请换一个短点的邮箱":""===t.trim()||L.test(t)?"":"邮箱格式错误"},inputIgnore:!0}],user:[{checker:function(t){return i().countStr(t)>20?"请限制用户名在20个字符以内":""}},{checker:function(t){return""===t.trim()?"用户名不允许为空字符":""},inputIgnore:!0}],content:[{checker:function(t){return i().countStr(t)>300?"请限制评论内容在300个字符以内":""}},{checker:function(t){return""===t.trim()?"评论内容不允许为空字符":""},inputIgnore:!0}]};function N(t,e){for(var n=T[t],r=n.val(),o="",i=0,a=F[t];i<a.length;i++){var c=a[i];if((!e||!c.inputIgnore)&&(o=c.checker(r)))break}var u=n.parent();o?(u.find("._comment_post_error").text(o),u.addClass(P)):u.removeClass(P);return o}function H(){var t=!1;S.on("click",(function(){if(!t&&!Object.keys(F).map((function(t){return N(t,!1)})).some((function(t){return t}))){t=!0,C.removeClass("_comment_submit_err_show");var e,n,o={};i().each(T,(function(t,e){o[e]=t.val(),t[0].readonly=!0})),e=o.user,n=o.email,localStorage.setItem(D,e),n&&localStorage.setItem(O,n);var a=i().timeout(300,(function(){S.text("发布中...")})),c=$&&$.id;d.submit(o.content,o.user,o.email,c).then((function(t){T.content.val(""),I(T.content),function(t){b(t);var e,n=y[t.id];if(n.top_pid){var o=y[n.top_pid];o.children.push(n),j(o.id)}else e=w(n),m.append(r().create(e)[0]);m.find('[data-id="'.concat(n.id,'"]'))[0].scrollIntoView({behavior:"smooth",block:"center"})}(t)}),(function(t){var e,n;e=401===t.code?"发布消息出错，wangwl为保留字，麻烦更换昵称后重试。":"发布消息出错，麻烦稍后再试。",n=e,C.text(n).addClass("_comment_submit_err_show")})).finally((function(){a.abort(),S.text("发布"),i().each(T,(function(t,e){t[0].readonly=!1})),R(),t=!1}))}}))}function B(){M.onDelegate("click","._comment_item_post_btn",(function(t){var e=r()(this).closest("[data-id]").dataset("id");$=y[e],k.html(i().template(A,$)),k[0].scrollIntoView({behavior:"smooth",block:"center"}),T.content.trigger("focus")})),k.onDelegate("click","._comment_post_quote_close",R)}function R(){$=null,k.html("")}const W=function(t){var e,n;!function(t){T={email:t.find("#_comment_input_email"),user:t.find("#_comment_input_user"),content:t.find("#_comment_input_content")},M=t.find("#_comment_root"),S=t.find("#_comment_submit"),C=t.find("#_comment_submit_err"),k=t.find("#_comment_post_quote_container")}(t),e=localStorage.getItem(D),n=localStorage.getItem(O),e&&T.user.val(e),n&&T.email.val(n),M.find("._comment_post_label").on("click",(function(){var t=r()(this).parent();t.hasClass(q)||t.find("input,textarea").trigger("focus")})),M.find("input,textarea").each((function(t){I(r()(t))})).on("focus",(function(){r()(this).parent().addClass(q)})).on("blur",(function(){I(r()(this))})),i().each(T,(function(t,e){t.on("input",(function(){N(e,!0)}))})),H(),B()};var U,J=n(645);!function(t){t.light="light",t.dark="dark",t.custom="custom"}(U||(U={}));var V={light:"_comment_root_theme_light",dark:"_comment_root_theme_dark",custom:"_comment_root_theme_custom"};function Y(t,e,n){return n&&t.removeClass(V[n]),t.addClass(V[e]),e}!function(){var t;t=r().create("link").attr({href:"/static/comment/index.css",rel:"stylesheet"}),r()("body").append(t[0]);var e=r()('script[src$="comment/index.js"]'),n=e.dataset("topicId"),o=e.dataset("containerId"),i=document.getElementById(o);!function(t){l=t}(n);var a=r().fragment(J),c=r()(a);Promise.all([g(c),W(c)]).then((function(){var t=c.children(),n=r()(i),o=Y(t,e.dataset("theme")||n.dataset("theme")||U.light);n.html("").append(c[0]),new MutationObserver((function(e){e.forEach((function(e){"attributes"===e.type&&"data-theme"===e.attributeName&&(o=Y(t,n.dataset("theme"),o))}))})).observe(i,{attributeFilter:["data-theme"]})})).catch((function(t){}))}()})()})();